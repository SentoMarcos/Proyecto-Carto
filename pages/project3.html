<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Proyecto 3 - Detalles</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'IBM Plex Mono', monospace;
      background-color: #f9f9f9;
      color: #333;
      margin: 0;
      padding: 20px;
    }

    .container {
      max-width: 800px;
      margin: auto;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      overflow: hidden;
    }

    .header {
      background-color: #28a745;
      color: white;
      padding: 20px;
      text-align: center;
    }

    .content {
      padding: 20px;
    }

    .footer {
      background: #f1f1f1;
      padding: 10px;
      text-align: center;
      font-size: 0.9rem;
    }

    .footer a {
      color: #28a745;
      text-decoration: none;
    }

    .footer a:hover {
      text-decoration: underline;
    }

    #pdf-viewer {
      text-align: center;
      margin-bottom: 20px;
    }

    #pdf-navigation {
      margin-bottom: 10px;
    }

    #pdf-canvas {
      display: block;
      margin: auto;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Proyecto 3</h1>
    </div>
    <div class="content">
      <div id="pdf-viewer">
        <div id="pdf-navigation">
          <button id="prev-page" class="btn btn-secondary btn-sm">Anterior</button>
          <span>Página: <span id="current-page">1</span> / <span id="total-pages">1</span></span>
          <button id="next-page" class="btn btn-secondary btn-sm">Siguiente</button>
        </div>
        <canvas id="pdf-canvas" style="border: 1px solid #ccc; width: 100%;"></canvas>
      </div>
    </div>

    <!-- Cargar PDF.js primero -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>

    <script>
      // Configurar el trabajador
      pdfjsLib.GlobalWorkerOptions.workerSrc = "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js";

      // Aquí comienza tu código para visualizar el PDF
      const pdfUrl = "../assets/Documents/PRECIPITACIONES_TEMPERATURAS_MAPA.pdf"; // Usar ruta relativa desde el HTML


      let pdfDoc = null,
          pageNum = 1,
          pageRendering = false,
          pageNumPending = null,
          scale = 1.5, // Escala del PDF
          canvas = document.getElementById('pdf-canvas'),
          ctx = canvas.getContext('2d');

      // Cargar el PDF
      pdfjsLib.getDocument(pdfUrl).promise.then((doc) => {
        pdfDoc = doc;
        document.getElementById('total-pages').textContent = pdfDoc.numPages;
        renderPage(pageNum);
      }).catch((error) => {
        console.error('Error al cargar el PDF:', error);
      });

      // Renderizar una página
      function renderPage(num) {
        pageRendering = true;

        pdfDoc.getPage(num).then((page) => {
          const viewport = page.getViewport({ scale: scale });
          canvas.height = viewport.height;
          canvas.width = viewport.width;

          const renderContext = {
            canvasContext: ctx,
            viewport: viewport,
          };

          const renderTask = page.render(renderContext);

          renderTask.promise.then(() => {
            pageRendering = false;

            if (pageNumPending !== null) {
              renderPage(pageNumPending);
              pageNumPending = null;
            }
          });
        });

        document.getElementById('current-page').textContent = num;
      }

      // Cambiar página
      function queueRenderPage(num) {
        if (pageRendering) {
          pageNumPending = num;
        } else {
          renderPage(num);
        }
      }

      // Navegación: Página anterior
      document.getElementById('prev-page').addEventListener('click', () => {
        if (pageNum <= 1) {
          return;
        }
        pageNum--;
        queueRenderPage(pageNum);
      });

      // Navegación: Página siguiente
      document.getElementById('next-page').addEventListener('click', () => {
        if (pageNum >= pdfDoc.numPages) {
          return;
        }
        pageNum++;
        queueRenderPage(pageNum);
      });
    </script>

    <p>
      Bienvenido a los detalles del Proyecto 3. Este proyecto se centra en el análisis de datos climáticos
      utilizando herramientas avanzadas para modelar el cambio climático y sus efectos en el entorno global.
    </p>
    <p>
      Características principales:
    <ul>
      <li>Modelos predictivos de cambios climáticos a gran escala.</li>
      <li>Análisis de tendencias basadas en datos históricos.</li>
      <li>Interfaz visual para comprender patrones complejos.</li>
    </ul>
    </p>
    <p>
      El Proyecto 3 combina innovación tecnológica con objetivos de sostenibilidad, proporcionando
      herramientas clave para afrontar los desafíos climáticos del futuro.
    </p>
  </div>

  <div class="footer">
    <p>&copy; 2024 Sento Marcos Ibarra. <a href="../index.html">Volver al Portafolio</a></p>
  </div>
</div>

</body>
</html>
